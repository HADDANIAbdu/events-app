<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All Events</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/vendor/css/core.css">
    <link rel="stylesheet" href="/vendor/css/theme-default.css">
    <link rel="stylesheet" href="/css/demo.css">
</head>
<body>
  <nav sec:authorize="isAuthenticated()" class="navbar navbar-expand-lg bg-body-tertiary pt-1_5 pb-1_5">
  <div class="container-fluid">
    <div class="container-fluid">
      <a href="/">
                <span class="app-brand-text demo menu-text fw-bold ms-2">
            BelamaEvents
          </span>
      </a>
    </div>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active ms-3" href="/events/" style="color: white">Events</a>
        </li>
        <li class="nav-item">
          <a class="nav-link ms-3" href="/users/admins" style="color: white">Admins</a>
        </li>
        <li class="nav-item">
          <a class="nav-link ms-3" href="/users/participants" style="color: white">Participants</a>
        </li>
        <li class="nav-item">
          <a class="nav-link ms-3" href="/payments/" style="color: white">Payments</a>
        </li>
      </ul>
      <form method="post" action="/logout">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <button type="submit" class="btn btn-danger ms-3">Logout</button>
      </form>
    </div>
  </div>
</nav>
  <div sec:authorize="isAuthenticated()" class="card d-flex align-items-center vh-100">
    <div class="table-responsive text-nowrap">
      <div class="row">
        <div class="d-flex justify-content-between align-items-center py-4 px-5 ">
          <a href="/events/create">
            <button class="btn add-new btn-primary ms-3" type="button">
              <i class="fa-solid fa-plus me-3"></i>
              <span>Add New Event</span>
            </button>
          </a>
        </div>
        <div th:if="${success}" class="alert alert-success d-flex text-end" role="alert">
          <strong th:text="${success}"></strong>
          <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div th:if="${error}" class="alert alert-danger d-flex text-end" role="alert">
          <strong th:text="${error}"></strong>
          <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th class="sorting" > Title </th>
            <th class="sorting" > Description </th>
            <th class="sorting" > Date </th>
            <th class="sorting" > Location </th>
            <th class="sorting" > Capacity </th>
            <th class="sorting" > Price </th>
            <th class="sorting" > Actions </th>
          </tr>
        </thead>
        <tbody>
        <tr th:each="event : ${events}">
          <td>
            <span class="text-heading" th:text="${event.title}"></span>
          </td>
          <td>
            <span class="text-heading" th:text="${event.description}"></span>
          </td>
          <td>
            <span class="text-heading" th:text="${event.date}"></span>
          </td>
          <td>
            <span class="text-heading" th:text="${event.location}"></span>
          </td>
          <td>
            <span class="text-heading" th:text="${event.capacity}"></span>
          </td>
          <td>
            <span class="text-heading" th:text="${event.price}"></span>
          </td>
          <td>
            <div class="d-flex align-items-center">
              <form method="get" th:action="@{/events/update/{id}(id=${event.id})}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button type="submit" class="btn btn-warning me-2">
                  <i class="fa-solid fa-pen"></i>
                </button>
              </form>
              <form th:method="delete" th:action="@{/events/delete/{id}(id=${event.id})}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button type="submit" class="btn btn-danger">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </form>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>